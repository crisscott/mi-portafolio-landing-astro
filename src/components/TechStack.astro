---
import { Database, Server, Layout, Terminal } from "lucide-react";
import { techStack, categoryGradients, type Tech } from "../data/techStack";

// Group technologies by category
const categories: Record<Tech["category"], { icon: any; items: Tech[] }> = {
	Backend: { icon: Server, items: [] },
	Frontend: { icon: Layout, items: [] },
	Database: { icon: Database, items: [] },
	DevOps: { icon: Terminal, items: [] },
};

techStack.forEach((tech) => {
	categories[tech.category].items.push(tech);
});

const skills = Object.entries(categories).map(([category, data]) => ({
	category,
	icon: data.icon,
	items: data.items,
	gradient: categoryGradients[category as Tech["category"]],
}));
---

<section class="py-16 px-4">
	<div class="max-w-6xl mx-auto">
		<h2 class="text-3xl sm:text-4xl font-bold text-center mb-4 text-zinc-900 dark:text-white">Tech Stack</h2>
		<p class="text-center text-zinc-600 dark:text-zinc-400 mb-12 max-w-2xl mx-auto">
			Tecnologías y herramientas con las que construyo soluciones modernas y escalables
		</p>

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
			{
				skills.map((skill) => (
					<div class="group relative bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-lg border border-zinc-200 dark:border-zinc-800 hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 overflow-hidden">
						{/* Gradient background on hover */}
						<div
							class={`absolute inset-0 bg-gradient-to-br ${skill.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}
						/>

						{/* Content */}
						<div class="relative z-10">
							<div class="flex items-center gap-3 mb-5">
								<div class={`p-3 rounded-xl bg-gradient-to-br ${skill.gradient} shadow-lg`}>
									<skill.icon size={24} className="text-white" />
								</div>
								<h3 class="font-bold text-xl text-zinc-900 dark:text-white">{skill.category}</h3>
							</div>

							<ul class="space-y-3">
								{skill.items.map((item) => (
									<li class="flex items-center gap-3 text-sm text-zinc-600 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-200 transition-colors">
										<img
											src={item.icon}
											alt={item.name}
											title={item.name}
											class="w-5 h-5 opacity-70 group-hover:opacity-100 transition-opacity flex-shrink-0 dark:invert"
										/>
										<span class="font-medium">{item.name}</span>
										{item.isPrincipal && (
											<span
												class={`ml-auto text-xs px-2 py-0.5 rounded-full bg-gradient-to-r ${skill.gradient} text-white font-semibold`}
											>
												★
											</span>
										)}
									</li>
								))}
							</ul>
						</div>
					</div>
				))
			}
		</div>
	</div>
</section>
